# ==============================================================================
#                      Picom Configuration (Optimized by XSimple)
# ==============================================================================

# 后端 (backend):
# glx (OpenGL) 通常性能更好，对现代显卡友好。xrender 兼容性更好，但性能稍差。
backend = "glx"; # 可以尝试 "xrender" 如果 glx 有问题

# 垂直同步 (vsync):
# 推荐开启以避免屏幕撕裂。
vsync = true;

# 阴影 (Shadows):
shadow = true;
shadow-radius = 12;         # 阴影模糊半径
shadow-offset-x = -7;       # 阴影水平偏移
shadow-offset-y = -7;       # 阴影垂直偏移
shadow-opacity = 0.75;      # 阴影透明度
# shadow-exclude = [           # 排除某些窗口的阴影
#   "class_g = 'Conky'",       # Conky typically looks better without shadows
#   "class_g = 'Rofi'",        # Rofi usually handles its own styling
#   "name = 'Notification'",   # Notifications often look cleaner without shadows
# ];

# 透明度/半透明 (Opacity):
# 可以为不同类型的窗口设置不同的透明度或排除透明效果
# inactive-opacity = 0.9;     # 非活动窗口透明度 (例如 0.9 表示 90% 不透明)
# active-opacity = 1;         # 活动窗口透明度
# frame-opacity = 1;          # 窗口边框透明度
# inactive-opacity-override = false; # 是否覆盖所有非活动窗口

# opacity-rule 允许根据窗口属性设置透明度。
inactive_opacity = 0.9                        # 所有非活动窗口默认 90% 不透明
# 格式: "不透明度:窗口规则"，多个规则可以用 `,` 分隔。
opacity-rule = [
    "100:class_g = 'Alacritty' && focused",        # 聚焦的 Alacritty 100% 不透明
    "90:class_g = 'Alacritty' && !focused",         # 非聚焦的 Alacritty 90% 不透明
    "100:class_g = 'Rofi'",                         # Rofi 100% 不透明
    "100:class_g = 'scratchpad'",                   # i3 Scratchpad 100% 不透明
    "100:class_g = 'Gimp'",                         # Gimp 100% 不透明
    "100:class_g = 'sxiv'",                         # Image viewer 100%
    "100:class_g = 'feh'",                          # Image viewer 100%
    "90:class_g = 'Code'"                           # VS Code 或其他编辑器窗口 90% 不透明
];

# 淡入淡出 (Fading):
fading = true;
fade-delta = 4;             # 每次淡入淡出动画的步长 (毫秒)
fade-in-step = 0.03;        # 淡入时每次变化的步长 (0.01 到 1.0)
fade-out-step = 0.03;       # 淡出时每次变化的步长 (0.01 到 1.0)
# fade-exclude = [ ];         # 排除某些窗口的淡入淡出

# 动画效果 (Animations):
# 如果有配置动画，需要在这里调整
# 参考你的 i3 配置中是否有如 "窗口打开/关闭的动画"

# 其他设置:
detect-rounded-corners = true; # 检测圆角窗口 (较少需要)
detect-client-opacity = true; # 允许客户端自己设置透明度

# 调试 (通常不需要开启):
# log-level = "info";
# log-file = "/path/to/your/picom.log";
